!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(this,(function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(r,i,function(t){return e[t]}.bind(null,i));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=33)}({0:function(e,t,n){"use strict";function r(e){for(var t=-1,n=0;n<l.length;n++)if(l[n].identifier===e){t=n;break}return t}function i(e,t){for(var n={},i=[],a=0;a<e.length;a++){var o=e[a],s=t.base?o[0]+t.base:o[0],u=n[s]||0,f="".concat(s," ").concat(u);n[s]=u+1;var p=r(f),d={css:o[1],media:o[2],sourceMap:o[3]};-1===p?l.push({identifier:f,updater:c(d,t),references:1}):(l[p].references++,l[p].updater(d)),i.push(f)}return i}function a(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var i=n.nc;i&&(r.nonce=i)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var a=f(e.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(t)}return t}function o(e,t,n,r){var i=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=p(t,i);else{var a=document.createTextNode(i),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(a,o[t]):e.appendChild(a)}}function s(e,t,n){var r=n.css,i=n.media,a=n.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),a&&btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}function c(e,t){var n,r,i;if(t.singleton){var c=m++;n=d||(d=a(t)),r=o.bind(null,n,c,!1),i=o.bind(null,n,c,!0)}else n=a(t),r=s.bind(null,n,t),i=function(){!function(e){null!==e.parentNode&&e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}var u=function(){var e;return function(){return void 0===e&&(e=!(!(window&&document&&document.all)||window.atob)),e}}(),f=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),l=[],p=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}(),d=null,m=0;e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=u());var n=i(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var a=0;a<n.length;a++){var o=r(n[a]);l[o].references--}for(var s=i(e,t),c=0;c<n.length;c++){var u=r(n[c]);0===l[u].references&&(l[u].updater(),l.splice(u,1))}n=s}}}},1:function(e){"use strict";function t(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var i=function(e){var t=btoa(unescape(encodeURIComponent(JSON.stringify(e)))),n="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(t);return"/*# ".concat(n," */")}(r),a=r.sources.map((function(e){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(e," */")}));return[n].concat(a).concat([i]).join("\n")}return[n].join("\n")}e.exports=function(e){var n=[];return n.toString=function(){return this.map((function(n){var r=t(n,e);return n[2]?"@media ".concat(n[2]," {").concat(r,"}"):r})).join("")},n.i=function(e,t,r){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(r)for(var a,o=0;o<this.length;o++)null!=(a=this[o][0])&&(i[a]=!0);for(var s,c=0;c<e.length;c++)s=[].concat(e[c]),(!r||!i[s[0]])&&(t&&(s[2]?s[2]="".concat(t," and ").concat(s[2]):s[2]=t),n.push(s))},n}},33:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function s(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){var t="function"==typeof Map?new Map:void 0;return(c=function(e){function n(){return u(e,arguments,p(this).constructor)}if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),l(n,e)})(e)}function u(){return(u=f()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&l(i,n.prototype),i}).apply(null,arguments)}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.r(t);var d=n(34);n.n(d);customElements.define("fm-imgprev",function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=n.call(this)).CONNECTED=!1,e.WRAPPER=void 0,e.LABEL_CLASS="fm-imgprev-label",e.HOLDER_CLASS="fm-imgprev-wrapper",e.PREVIEW_CLASS="fm-imgprev-preview",e.ACTIONS_CLASS="fm-imgprev-actions",e}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,e);var n=function(e){return function(){var t,n=p(e);if(f()){var r=p(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return s(this,t)}}(t);return function(e,t,n){t&&o(e.prototype,t),n&&o(e,n)}(t,[{key:"attributeChangedCallback",value:function(e,t,n){var r=e.toLowerCase();("data-width"===r||"data-height"===r)&&this.resize(),"data-placeholder"===r&&this.updateLabel(this.dataset.placeholder),"data-fake-btn"===r&&this.updateFakeBtnText(this.dataset.fakeBtn),"data-fake-btn-classes"===r&&this.updateFakeBtnClasses(t,n)}},{key:"connectedCallback",value:function(){this.CONNECTED||this.connect()}},{key:"validateElement",value:function(){var e=this.getAttribute("type");e&&"file"===e.toLowerCase()||console.warn("fm-imgprev element must be an input type file")}},{key:"connect",value:function(){this.CONNECTED=!0,this.validateElement(),this.wrap(),this.listen()}},{key:"wrap",value:function(){if(!this.WRAPPER){var e=document.createElement("div");e.classList.add(this.HOLDER_CLASS),e.style.width=this.dataset.width||"100%",e.style.height=this.dataset.height||"100%",this.dataset.fakeBtn&&(e.dataset.fakeBtn=this.dataset.fakebtn),this.parentElement.insertBefore(e,this),this.WRAPPER=e,this.addPreviewer(),this.addActions()}}},{key:"addActions",value:function(){var e=document.createElement("div");e.classList.add(this.ACTIONS_CLASS),e.append(this),e.append(this.createFakeBtn()),e.append(this.createB64ImgInput()),this.WRAPPER.append(e)}},{key:"addPreviewer",value:function(){if(this.WRAPPER){var e=document.createElement("div");e.classList.add(this.PREVIEW_CLASS),e.setAttribute("data-placeholder",this.dataset.placeholder||""),e.append(this.createPreviewImg()),this.dataset.persistent||e.append(this.createPreviewCloseBtn()),this.WRAPPER.prepend(e)}}},{key:"createPreviewImg",value:function(){var e=document.createElement("img"),t=this.dataset.initialImg;return t&&(e.src=t),e}},{key:"createFakeBtn",value:function(){var e,t=this,n=document.createElement("button"),r=this.dataset.fakeBtnClasses?this.dataset.fakeBtnClasses.split(" "):"";return n.innerText=this.dataset.fakeBtn||"Upload Image",n.classList.add("fm-imgprev-fake-btn"),r&&(e=n.classList).add.apply(e,i(r)),n.addEventListener("click",(function(){return t.click()})),n}},{key:"createB64ImgInput",value:function(){var e=document.createElement("input");return e.setAttribute("type","text"),e.setAttribute("hidden","true"),e.classList.add("fm-imgprev-b64-input"),e.setAttribute("name","".concat(this.name,"_base64")),e.value=this.dataset.base64Input||"",e}},{key:"createPreviewCloseBtn",value:function(){var e=this,t=document.createElement("span");return t.classList.add("close"),t.addEventListener("click",(function(){return e.resetState()})),t}},{key:"updateLabel",value:function(e){this.WRAPPER&&e&&(this.WRAPPER.querySelector(".".concat(this.PREVIEW_CLASS)).dataset.placeholder=e)}},{key:"updateFakeBtnText",value:function(e){this.WRAPPER&&e&&(this.WRAPPER.querySelector(".fm-imgprev-fake-btn").innerText=e)}},{key:"updateFakeBtnClasses",value:function(e,t){if(this.WRAPPER){var n,r,a=this.WRAPPER.querySelector(".fm-imgprev-fake-btn");if(e.length)(n=a.classList).remove.apply(n,i(e.split(" ")));if(t.length)(r=a.classList).add.apply(r,i(t.split(" ")))}}},{key:"resize",value:function(){this.WRAPPER&&(this.parentElement.style.width=this.dataset.width||"100%",this.parentElement.style.height=this.dataset.height||"100%")}},{key:"isLoading",value:function(e){this.WRAPPER&&this.WRAPPER.classList[e?"add":"remove"]("loading")}},{key:"listen",value:function(){var e=this;this.addEventListener("change",(function(t){e.isLoading(!0);var n=t.target.files,r=new FileReader,i=+e.dataset.maxSize,a=+e.dataset.minSize;n&&n[0]?(r.onload=function(t){return!!e.validateImgSize(n[0].size,a,i)&&e.updatePreviewImage(t.target.result)},r.onerror=function(e){console.error(e)},r.onloadend=function(){e.isLoading(!1)},r.readAsDataURL(n[0])):e.resetState()}))}},{key:"validateImgSize",value:function(e,t,n){return n&&this.bytesToSize(e)>n?(this.value="",this.isLoading(!1),console.error(this.dataset.maxSizeError),!1):!(t&&e<t&&(this.value="",this.isLoading(!1),console.error(this.dataset.minSizeError),1))}},{key:"updatePreviewImage",value:function(e){this.WRAPPER.querySelector(".".concat(this.PREVIEW_CLASS," img")).src=e,this.WRAPPER.querySelector(".fm-imgprev-b64-input").value=e,this.isLoading(!1),this.execInlineEvent("data-on:image")}},{key:"resetState",value:function(){this.value="",this.isLoading(!1),this.WRAPPER.querySelector(".fm-imgprev-b64-input").value="",this.WRAPPER.querySelector(".".concat(this.PREVIEW_CLASS," img")).removeAttribute("src"),this.execInlineEvent("data-on:reset")}},{key:"bytesToSize",value:function(e){return(e/1048576).toFixed(2)}},{key:"execInlineEvent",value:function(e){return this.getAttribute(e)?window[this.getAttribute(e).split("(")[0].trim()](this):null}}],[{key:"observedAttributes",get:function(){return["data-width","data-height","data-placeholder","data-fake-btn","data-fake-btn-classes"]}}]),t}(c(HTMLInputElement)),{extends:"input"})},34:function(e,t,n){var r=n(0),i=n(35);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);r(i,{insert:"head",singleton:!1});var a=i.locals?i.locals:{};e.exports=a},35:function(e,t,n){(t=n(1)(!1)).push([e.i,'.fm-imgprev-wrapper{border:solid 1px #cccccc;width:300px;height:300px;display:inline-flex;position:relative;flex-direction:column;box-sizing:border-box}.fm-imgprev-wrapper.loading{opacity:.5;pointer-events:none}.fm-imgprev-wrapper .fm-imgprev-preview{flex:1;z-index:1;width:100%;height:100%;max-height:100%;max-width:100%;background-color:#000000}.fm-imgprev-wrapper .fm-imgprev-preview::after{z-index:-1;box-sizing:border-box;content:attr(data-placeholder);position:absolute;padding:10px;top:40%;transform:translateY(-50%);width:100%;text-align:center;color:#f1f1f1}.fm-imgprev-wrapper .fm-imgprev-preview img{width:100%;height:100%;max-height:100%;max-width:100%;display:block;object-fit:contain}.fm-imgprev-wrapper .fm-imgprev-preview img:not([src]){display:none}.fm-imgprev-wrapper .fm-imgprev-preview .close{display:none}.fm-imgprev-wrapper .fm-imgprev-preview img[src]+.close{cursor:pointer;display:initial;position:absolute;right:10px;top:10px;width:32px;height:32px;opacity:0.5}.fm-imgprev-wrapper .fm-imgprev-preview img[src]+.close:hover{opacity:1}.fm-imgprev-wrapper .fm-imgprev-preview img[src]+.close:before,.fm-imgprev-wrapper .fm-imgprev-preview img[src]+.close:after{position:absolute;left:15px;content:\' \';height:33px;width:2px;background-color:#ffffff}.fm-imgprev-wrapper .fm-imgprev-preview img[src]+.close:before{transform:rotate(45deg)}.fm-imgprev-wrapper .fm-imgprev-preview img[src]+.close:after{transform:rotate(-45deg)}.fm-imgprev-wrapper .fm-imgprev-actions input[type="file"]{padding:10px;display:block;width:100%;outline:none;background-color:#ffffff}.fm-imgprev-wrapper .fm-imgprev-actions button.fm-imgprev-fake-btn{display:none}.fm-imgprev-wrapper .fm-imgprev-actions input.fm-imgprev-b64-input{display:none}.fm-imgprev-wrapper[data-fake-btn] .fm-imgprev-actions input[type="file"]{display:none}.fm-imgprev-wrapper[data-fake-btn] .fm-imgprev-actions button.fm-imgprev-fake-btn{display:block;margin:10px auto}\n',""]),e.exports=t}}).default}));